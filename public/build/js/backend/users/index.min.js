/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 129);
/******/ })
/************************************************************************/
/******/ ({

/***/ 129:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(130);


/***/ }),

/***/ 130:
/***/ (function(module, exports) {

new window.App({
    el: '#app',

    data: function data() {
        return {
            users: [],
            roles: [],
            text: '',
            role: '*',
            city: '*',
            cities: [],
            subject: '',
            status: '*',
            selected: [],
            type: 'email',
            sending: false,
            registered_after: '',
            registered_before: ''
        };
    },


    watch: {
        role: function role() {
            this.fetch();
        },
        city: function city() {
            this.fetch();
        },
        status: function status() {
            this.fetch();
        },
        registered_after: function registered_after() {
            this.fetch();
        },
        registered_before: function registered_before() {
            this.fetch();
        }
    },

    methods: {
        printStatus: function printStatus(status) {
            switch (status) {
                case 0:
                    return '<a class="label label-rouded label-default">Unverified</a>';
                    break;
                case 1:
                    return '<a class="label label-rouded label-info">Verified</a>';
                    break;
                case 2:
                    return '<a class="label label-rouded label-warning">Suspended</a>';
                    break;
                case 3:
                    return '<a class="label label-rouded label-success">Approved</a>';
                    break;
                case 4:
                    return '<a class="label label-rouded label-danger">Disapproved</a>';
                    break;
            }
        },
        getFilters: function getFilters() {
            var role = this.role,
                city = this.city,
                status = this.status,
                registered_after = this.registered_after,
                registered_before = this.registered_before;

            return { role: role, city: city, registered_after: registered_after, registered_before: registered_before, status: status };
        },
        fetch: function fetch() {
            var _this = this;

            window.axios.post('/api/users/filter', this.getFilters()).then(function (response) {
                _this.users = response.data.users;
            });
        },
        message: function message(selected) {
            this.selected = selected;

            $('#openMessageModal').click();
        },
        bulk: function bulk() {
            var _this2 = this;

            if (this.sending) {
                return false;
            }

            var type = this.type;
            var message = this.text;
            var subject = this.subject;
            var to = this.selected.length === 1 ? this.selected[0].id : this.getFilters();

            this.sending = true;

            window.axios.post('/api/users/bulk', { message: message, type: type, subject: subject, to: to }).then(function (response) {
                _this2.sending = false;

                alert('Messages sent completely');
            });
        }
    },

    mounted: function mounted() {
        var _this3 = this;

        window.axios.post('/api/users/init').then(function (response) {
            Object.assign(_this3, response.data);
        });

        this.fetch();
    }
});

/***/ })

/******/ });